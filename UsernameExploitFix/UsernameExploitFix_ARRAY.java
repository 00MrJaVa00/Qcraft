package pw.qcraft.qcraft.usernames.exploit.fix;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.net.URL;
import java.net.URLConnection;
import java.nio.charset.Charset;
import java.util.ArrayList;

import org.bukkit.Bukkit;
import org.bukkit.craftbukkit.libs.jline.internal.Log;
import org.bukkit.entity.Player;
import org.bukkit.event.Listener;

import pw.qcraft.qcraft.Arraylists.ArrayListManager;
import pw.qcraft.qcraft.Core.Main;

public class UsernameExploitFix_ARRAY implements Listener {
	private UsernameExploitFix UsernameExploitFix;
	public UsernameExploitFix_ARRAY(UsernameExploitFix UsernameExploitFix) {
		this.UsernameExploitFix = UsernameExploitFix;
	}
	private ArrayListManager arm;
	public UsernameExploitFix_ARRAY(ArrayListManager arm) {
		this.arm = arm;
	}
	ArrayList<String> usrfix = arm.Username_FIX;
	private Main main;
	public UsernameExploitFix_ARRAY(final Main main) {
		this.main = main;
	//Timed clear and kick for user name exploit fix
		this.main = main;
		Bukkit.getScheduler().scheduleSyncRepeatingTask(Bukkit.getPluginManager().getPlugin("Qcraft"), new Runnable() {
		    @Override
		    public void run() {
		    	for (Player p : Bukkit.getServer().getOnlinePlayers()) {
		    		if (usrfix.contains(p.getPlayer().getName())) {
		    			p.kickPlayer("(Username ERROR) - Exploiting username?");
		    		}
		    	}
		    }
		}, 1, 90);
		
	}	
}
